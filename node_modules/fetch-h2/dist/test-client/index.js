"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable-next-line
const __1 = require("..");
async function work() {
    const args = process.argv.slice(2);
    const [method, url, version, insecure] = args;
    const rejectUnauthorized = insecure !== "insecure";
    __1.setup({
        http1: {
            keepAlive: false,
        },
        ...(!version ? {} : {
            httpProtocol: version,
            httpsProtocols: [version],
        }),
        session: { rejectUnauthorized },
    });
    const response = await __1.fetch(url, {
        method: method,
    });
    const readable = await response.readable();
    readable.pipe(process.stdout);
}
work()
    // tslint:disable-next-line
    .catch(err => { console.error(err.stack); });
//# sourceMappingURL=index.js.map